<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- üîí CONTENT SECURITY POLICY-->
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   script-src 'self' 'unsafe-inline';
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
                   font-src 'self' https://fonts.gstatic.com;
                   img-src 'self' data:;">

    <title>V-MatriX</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/cyberpunk-loader">
</head>
<body>
    <header class="app-header">
        <div class="marquee-container">
            <div class="marquee">
                <span>üéØ V-MatriX ‚Ä¢ Calculadora Avanzada ‚Ä¢ Vectores ‚Ä¢ Matrices ‚Ä¢ Historial ‚Ä¢ üéØ</span>
                <span>üéØ V-MatriX ‚Ä¢ Calculadora Avanzada ‚Ä¢ Vectores ‚Ä¢ Matrices ‚Ä¢ Historial ‚Ä¢ üéØ</span>
            </div>
        </div>
        <h1>V-MatriX</h1>
        <p>Calculadora Avanzada de Vectores y Matrices</p>
    </header>

    <div class="app-container">
        <nav class="navigation">
            <button class="nav-btn" data-tab="vectors">Vectores</button>
            <button class="nav-btn active" data-tab="matrices">Matrices</button>
            <button class="nav-btn" data-tab="history">Historial</button>
        </nav>

        <main class="main-content">
            <!-- Panel de Matrices -->
            <div id="matrices-tab" class="tab-content active">
                <div class="matrix-controls">
                    <h3>üîÑ Operaciones Matriciales</h3>

                    <!-- Selector de tama√±o -->
                    <div class="size-selector">
                        <label>Tama√±o de matriz:</label>
                        <select id="matrixSize">
                            <option value="2x2">2x2</option>
                            <option value="3x3">3x3</option>
                        </select>
                    </div>

                    <!-- Inputs de matrices -->
                    <div class="matrices-container">
                        <div class="matrix-input">
                            <h4>Matriz A</h4>
                            <div id="matrixA-inputs" class="matrix-grid"></div>
                        </div>

                        <div class="matrix-input">
                            <h4>Matriz B</h4>
                            <div id="matrixB-inputs" class="matrix-grid"></div>
                        </div>
                    </div>

                    <!-- Operaciones -->
                    <div class="matrix-operations">
                        <button id="btnMatrixAdd">A + B</button>
                        <button id="btnMatrixSub">A - B</button>
                        <button id="btnMatrixMul">A √ó B</button>
                        <button id="btnDetA">Det(A)</button>
                        <button id="btnDetB">Det(B)</button>
                    </div>
                </div>

                <div class="visualization-panel">
                    <h4>üìä Resultados Matriciales</h4>
                    <div id="matrix-results" class="results-output">
                        <p>Los resultados aparecer√°n aqu√≠...</p>
                    </div>
                </div>
            </div>

            <!-- Panel de Vectores -->
            <div id="vectors-tab" class="tab-content">
                <div class="vector-controls">
                    <h3>üß≠ Operaciones Vectoriales 3D</h3>

                    <!-- Inputs de vectores CORREGIDOS -->
                    <div class="vectors-input">
                        <div class="vector-input-group">
                            <h4>Vector A</h4>
                            <div class="coord-inputs">
                                <input type="number" id="vectorAx" placeholder="X" value="3">
                                <input type="number" id="vectorAy" placeholder="Y" value="4">
                                <input type="number" id="vectorAz" placeholder="Z" value="2">
                            </div>
                        </div>

                        <div class="vector-input-group">
                            <h4>Vector B</h4>
                            <div class="coord-inputs">
                                <input type="number" id="vectorBx" placeholder="X" value="1">
                                <input type="number" id="vectorBy" placeholder="Y" value="-2">
                                <input type="number" id="vectorBz" placeholder="Z" value="5">
                            </div>
                        </div>
                    </div>

                    <!-- Operaciones vectoriales CORREGIDAS -->
                    <div class="vector-operations">
                        <button id="btnVectorAdd">A + B</button>
                        <button id="btnVectorSub">A - B</button>
                        <button id="btnVectorDot">A ¬∑ B (Punto)</button>
                        <button id="btnVectorCross">A √ó B (Cruz)</button>
                        <button id="btnVectorMagA">|A| (Magnitud)</button>
                        <button id="btnVectorMagB">|B| (Magnitud)</button>
                        <button id="btnVectorNormA">A Normalizado</button>
                        <button id="btnVectorNormB">B Normalizado</button>
                        <button id="btnVectorAngle">‚à† A y B (√Ångulo)</button>
                    </div>
                </div>

                <div class="visualization-panel">
                    <h4>üéØ Visualizaci√≥n 3D</h4>

                    <!-- Controles de gr√°ficos 3D -->
                    <div class="graphics-controls">
                        <div class="control-group">
                            <label>üîç Zoom:</label>
                            <input type="range" id="zoomControl" min="10" max="100" value="25" class="control-slider">
                            <span id="zoomValue">25</span>
                        </div>
                        <div class="control-group">
                            <label>üîÑ Rotaci√≥n X:</label>
                            <input type="range" id="rotateXControl" min="0" max="360" value="0" class="control-slider">
                            <span id="rotateXValue">0¬∞</span>
                        </div>
                        <div class="control-group">
                            <label>üîÑ Rotaci√≥n Y:</label>
                            <input type="range" id="rotateYControl" min="0" max="360" value="0" class="control-slider">
                            <span id="rotateYValue">0¬∞</span>
                        </div>
                        <div class="control-buttons">
                            <button id="resetView" class="control-btn cyber-btn">üîÑ Reiniciar Vista</button>
                            <button id="toggleGrid" class="control-btn cyber-btn">üî≤ Toggle Grid</button>
                        </div>
                    </div>

                    <canvas id="vectorCanvas" width="600" height="500"></canvas>
                    <div id="vector-results" class="results-output">
                        <p>Los resultados vectoriales aparecer√°n aqu√≠...</p>
                    </div>
                </div>
            </div>

            <!-- Panel de Historial -->
            <div id="history-tab" class="tab-content">
                <div class="history-container">
                    <!-- Marquee Cyberpunk -->
                    <div class="history-marquee">
                        <div class="history-marquee-content">
                            <div class="history-marquee-text">‚ö° HISTORIAL DE OPERACIONES ‚ö°</div>
                            <div class="history-marquee-text">üîÆ V-MATRIX CYBERPUNK 2077 üîÆ</div>
                            <div class="history-marquee-text">üéØ REGISTRO DE C√ÅLCULOS üéØ</div>
                        </div>
                    </div>

                    <div class="history-controls">
                        <div class="history-actions">
                            <button id="clearHistory" class="history-btn danger">üóëÔ∏è PURGAR HISTORIAL</button>
                            <button id="exportHistory" class="history-btn">üì§ EXPORTAR DATOS</button>
                            <button id="importHistory" class="history-btn">üì• IMPORTAR DATOS</button>
                            <input type="file" id="historyFileInput" style="display: none;">
                        </div>

                        <div class="history-filters">
                            <select id="filterType">
                                <option value="all">üåê TODOS LOS TIPOS</option>
                                <option value="vector">‚û°Ô∏è VECTORES</option>
                                <option value="matrix">üî≤ MATRICES</option>
                            </select>

                            <select id="filterOperation">
                                <option value="all">‚ö° TODAS LAS OPERACIONES</option>
                                <option value="sum">‚ûï SUMA</option>
                                <option value="subtract">‚ûñ RESTA</option>
                                <option value="multiply">‚úñÔ∏è MULTIPLICACI√ìN</option>
                                <option value="cross">‚ùå PRODUCTO CRUZ</option>
                                <option value="dot">üîò PRODUCTO PUNTO</option>
                                <option value="magnitude">üìè MAGNITUD</option>
                                <option value="normalize">üéØ NORMALIZACI√ìN</option>
                                <option value="angle">üìê √ÅNGULO</option>
                                <option value="determinant">üîç DETERMINANTE</option>
                            </select>

                            <input type="text" id="searchHistory" placeholder="üîç BUSCAR EN REGISTROS...">
                        </div>
                    </div>

                    <div class="history-list">
                        <div class="history-stats">
                            <span id="totalOperations">üìä TOTAL: 0 OPERACIONES</span>
                            <span id="historySize">üíæ TAMA√ëO: 0 KB</span>
                            <span id="lastUpdate">üïí ACTUALIZADO: --:--:--</span>
                        </div>

                        <div id="historyItems" class="history-items">
                            <div class="empty-history">
                                <div class="empty-icon">üîÆ</div>
                                <h4>REGISTROS VAC√çOS</h4>
                                <p>Realiza operaciones para generar datos en el historial</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ORDEN CORREGIDO DE SCRIPTS -->
    <script src="js/graphics3D.js"></script>
    <script src="js/matrixOperations.js"></script>
    <script src="js/vectorOperations.js"></script>
    <script src="js/historyManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>