<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ğŸ”’ CONTENT SECURITY POLICY-->
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   script-src 'self' 'unsafe-inline';
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
                   font-src 'self' https://fonts.gstatic.com;
                   img-src 'self' data:;">

    <title>V-MatriX</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/cyberpunk-loader">
    <!-- META ETIQUETAS PARA ELECTRON -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval';">
    <meta name="theme-color" content="#00f0ff">
    <!-- META DE LA APP -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="V-MatriX - Calculadora avanzada de vectores y matrices con visualizaciÃ³n 3D">
    <meta name="keywords" content="vectores, matrices, Ã¡lgebra lineal, calculadora, 3D, cyberpunk">
    <meta name="author" content="Anthony Emmanuel Aguilar VelÃ¡squez">
</head>
    <body>
        <header class="app-header">
            <div class="marquee-container">
                <div class="marquee">
                    <span>ğŸ¯ V-MatriX â€¢ Calculadora Avanzada â€¢ Vectores â€¢ Matrices â€¢ Historial â€¢ ğŸ¯</span>
                    <span>ğŸ¯ V-MatriX â€¢ Calculadora Avanzada â€¢ Vectores â€¢ Matrices â€¢ Historial â€¢ ğŸ¯</span>
                </div>
            </div>
            <h1>V-MatriX</h1>
            <p>Calculadora Avanzada de Vectores y Matrices</p>
        </header>

        <div class="app-container">
            <nav class="navigation">
                <button class="nav-btn" data-tab="vectors">Vectores</button>
                <button class="nav-btn active" data-tab="matrices">Matrices</button>
                <button class="nav-btn" data-tab="history">Historial</button>
            </nav>

            <main class="main-content">
                <!-- Panel de Matrices -->
    <div id="matrices-tab" class="tab-content active">
        <div class="matrix-controls">
            <h3>ğŸ”„ Operaciones Matriciales</h3>

            <!-- Selector de tamaÃ±o -->
            <div class="size-selector">
                <label>TamaÃ±o de matriz:</label>
                <select id="matrixSize">
                    <option value="2x2">2x2</option>
                    <option value="3x3">3x3</option>
                </select>
            </div>

            <!-- Inputs de matrices -->
            <div class="matrices-container">
                <div class="matrix-input">
                    <h4>Matriz A</h4>
                    <div id="matrixA-inputs" class="matrix-grid"></div>
                </div>

                <div class="matrix-input">
                    <h4>Matriz B</h4>
                    <div id="matrixB-inputs" class="matrix-grid"></div>
                </div>
            </div>

            <!-- Operaciones -->
            <div class="matrix-operations">
                <button id="btnMatrixAdd">A + B</button>
                <button id="btnMatrixSub">A - B</button>
                <button id="btnMatrixMul">A Ã— B</button>
                <button id="btnDetA">Det(A)</button>
                <button id="btnDetB">Det(B)</button>
            </div>
        </div>

        <div class="visualization-panel">
            <h4>ğŸ“Š Resultados Matriciales</h4>
            <div id="matrix-results" class="results-output">
                <p>Los resultados aparecerÃ¡n aquÃ­...</p>
            </div>
        </div>
    </div>

    <!-- Panel de Vectores -->
    <div id="vectors-tab" class="tab-content">
        <div class="vector-controls">
            <h3>ğŸ§­ Operaciones Vectoriales 3D</h3>

            <!-- Inputs de vectores CORREGIDOS -->
            <div class="vectors-input">
                <div class="vector-input-group">
                    <h4>Vector A</h4>
                    <div class="coord-inputs">
                        <input type="number" id="vectorAx" placeholder="X" value="3">
                        <input type="number" id="vectorAy" placeholder="Y" value="4">
                        <input type="number" id="vectorAz" placeholder="Z" value="2">
                    </div>
                </div>

                <div class="vector-input-group">
                    <h4>Vector B</h4>
                    <div class="coord-inputs">
                        <input type="number" id="vectorBx" placeholder="X" value="1">
                        <input type="number" id="vectorBy" placeholder="Y" value="-2">
                        <input type="number" id="vectorBz" placeholder="Z" value="5">
                    </div>
                </div>
            </div>

            <!-- Operaciones vectoriales CORREGIDAS -->
            <div class="vector-operations">
                <button id="btnVectorAdd">A + B</button>
                <button id="btnVectorSub">A - B</button>
                <button id="btnVectorDot">A Â· B (Punto)</button>
                <button id="btnVectorCross">A Ã— B (Cruz)</button>
                <button id="btnVectorMagA">|A| (Magnitud)</button>
                <button id="btnVectorMagB">|B| (Magnitud)</button>
                <button id="btnVectorNormA">A Normalizado</button>
                <button id="btnVectorNormB">B Normalizado</button>
                <button id="btnVectorAngle">âˆ  A y B (Ãngulo)</button>
            </div>
        </div>

        <div class="visualization-panel">
            <h4>ğŸ¯ VisualizaciÃ³n 3D</h4>

            <!-- Controles de grÃ¡ficos 3D -->
            <div class="graphics-controls">
                <div class="control-group">
                    <label>ğŸ” Zoom:</label>
                    <input type="range" id="zoomControl" min="10" max="100" value="25" class="control-slider">
                    <span id="zoomValue">25</span>
                </div>
                <div class="control-group">
                    <label>ğŸ”„ RotaciÃ³n X:</label>
                    <input type="range" id="rotateXControl" min="0" max="360" value="0" class="control-slider">
                    <span id="rotateXValue">0Â°</span>
                </div>
                <div class="control-group">
                    <label>ğŸ”„ RotaciÃ³n Y:</label>
                    <input type="range" id="rotateYControl" min="0" max="360" value="0" class="control-slider">
                    <span id="rotateYValue">0Â°</span>
                </div>
                <div class="control-buttons">
                    <button id="resetView" class="control-btn cyber-btn">ğŸ”„ Reiniciar Vista</button>
                    <button id="toggleGrid" class="control-btn cyber-btn">ğŸ”² Toggle Grid</button>
                </div>
            </div>

            <canvas id="vectorCanvas" width="600" height="500"></canvas>
            <div id="vector-results" class="results-output">
                <p>Los resultados vectoriales aparecerÃ¡n aquÃ­...</p>
            </div>
        </div>
    </div>

    <!-- Panel de Historial -->
    <div id="history-tab" class="tab-content">
        <div class="history-container">
            <!-- Marquee Cyberpunk -->
            <div class="history-marquee">
                <div class="history-marquee-content">
                    <div class="history-marquee-text">âš¡ HISTORIAL DE OPERACIONES âš¡</div>
                    <div class="history-marquee-text">ğŸ”® V-MATRIX CYBERPUNK 2077 ğŸ”®</div>
                    <div class="history-marquee-text">ğŸ¯ REGISTRO DE CÃLCULOS ğŸ¯</div>
                </div>
            </div>

            <div class="history-controls">
                <div class="history-actions">
                    <button id="clearHistory" class="history-btn danger">ğŸ—‘ï¸ PURGAR HISTORIAL</button>
                    <button id="exportHistory" class="history-btn">ğŸ“¤ EXPORTAR DATOS</button>
                    <button id="importHistory" class="history-btn">ğŸ“¥ IMPORTAR DATOS</button>
                    <input type="file" id="historyFileInput" style="display: none;">
                </div>

                <div class="history-filters">
                    <select id="filterType">
                        <option value="all">ğŸŒ TODOS LOS TIPOS</option>
                        <option value="vector">â¡ï¸ VECTORES</option>
                        <option value="matrix">ğŸ”² MATRICES</option>
                    </select>

                    <select id="filterOperation">
                        <option value="all">âš¡ TODAS LAS OPERACIONES</option>
                        <option value="sum">â• SUMA</option>
                        <option value="subtract">â– RESTA</option>
                        <option value="multiply">âœ–ï¸ MULTIPLICACIÃ“N</option>
                        <option value="cross">âŒ PRODUCTO CRUZ</option>
                        <option value="dot">ğŸ”˜ PRODUCTO PUNTO</option>
                        <option value="magnitude">ğŸ“ MAGNITUD</option>
                        <option value="normalize">ğŸ¯ NORMALIZACIÃ“N</option>
                        <option value="angle">ğŸ“ ÃNGULO</option>
                        <option value="determinant">ğŸ” DETERMINANTE</option>
                    </select>

                    <input type="text" id="searchHistory" placeholder="ğŸ” BUSCAR EN REGISTROS...">
                </div>
            </div>

            <div class="history-list">
                <div class="history-stats">
                    <span id="totalOperations">ğŸ“Š TOTAL: 0 OPERACIONES</span>
                    <span id="historySize">ğŸ’¾ TAMAÃ‘O: 0 KB</span>
                    <span id="lastUpdate">ğŸ•’ ACTUALIZADO: --:--:--</span>
                </div>

                <div id="historyItems" class="history-items">
                    <div class="empty-history">
                        <div class="empty-icon">ğŸ”®</div>
                        <h4>REGISTROS VACÃOS</h4>
                        <p>Realiza operaciones para generar datos en el historial</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </main>
    </div>

    <!-- ORDEN CORREGIDO DE SCRIPTS - VERSIÃ“N ELECTRON -->
    <script src="js/matrixOperations.js"></script>
    <script src="js/vectorOperations.js"></script>
    <script src="js/graphics3D.js"></script>
    <script src="js/historyManager.js"></script>
    <script src="js/app.js"></script>

    <!-- SCRIPT DE INICIALIZACIÃ“N SEGURO -->
    <script>
        // Esperar a que todo estÃ© cargado
        window.addEventListener('DOMContentLoaded', () => {
            console.log("ğŸš€ V-MatriX iniciando...");

            // Inicializar la aplicaciÃ³n con manejo de errores
            try {
                if (typeof VMatrixApp !== 'undefined') {
                    window.app = new VMatrixApp();
                    console.log("âœ… V-MatriX inicializada correctamente");
                } else {
                    console.error("âŒ VMatrixApp no estÃ¡ definido");
                }
            } catch (error) {
                console.error("âŒ Error crÃ­tico al inicializar:", error);
            }
        });
    </script>
    </body>
</html>